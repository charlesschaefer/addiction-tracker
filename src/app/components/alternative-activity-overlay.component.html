<div *ngIf="show" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn">
  <div class="bg-white/95 rounded-2xl shadow-2xl p-8 max-w-lg w-full border border-gray-100 animate-scaleIn overflow-y-auto max-h-[90vh]">
    <div class="mb-2 text-teal-500 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
      </svg>
    </div>
    <h3 class="text-2xl font-semibold text-gray-800 mb-3 text-center">
      Try a Healthy Alternative
    </h3>
    <p class="text-gray-600 mb-6 leading-relaxed text-center">
      Instead of using, would you like to try one of these healthier activities? It might help reduce your craving and give you time to reflect.
    </p>
    <div class="grid grid-cols-2 gap-4 mb-6">
      <button type="button" (click)="select('breathing')" class="flex flex-col items-center p-4 rounded-xl border border-teal-200 bg-teal-50 hover:bg-teal-100 transition-all transform hover:scale-[1.03] active:scale-[0.98]">
        <div class="w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 017.072 0m-9.9-2.828a9 9 0 0112.728 0"/>
          </svg>
        </div>
        <span class="font-medium text-teal-700">Breathing Exercise</span>
        <span class="text-xs text-teal-600 mt-1">5 minutes</span>
      </button>
      <button type="button" (click)="select('drink_water')" class="flex flex-col items-center p-4 rounded-xl border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-all transform hover:scale-[1.03] active:scale-[0.98]">
        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
          </svg>
        </div>
        <span class="font-medium text-blue-700">Drink Water</span>
        <span class="text-xs text-blue-600 mt-1">1 minute</span>
      </button>
      <button type="button" (click)="select('walk')" class="flex flex-col items-center p-4 rounded-xl border border-green-200 bg-green-50 hover:bg-green-100 transition-all transform hover:scale-[1.03] active:scale-[0.98]">
        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
          </svg>
        </div>
        <span class="font-medium text-green-700">Take a Walk</span>
        <span class="text-xs text-green-600 mt-1">10-15 minutes</span>
      </button>
      <button type="button" (click)="select('stretching')" class="flex flex-col items-center p-4 rounded-xl border border-purple-200 bg-purple-50 hover:bg-purple-100 transition-all transform hover:scale-[1.03] active:scale-[0.98]">
        <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
        </div>
        <span class="font-medium text-purple-700">Stretching</span>
        <span class="text-xs text-purple-600 mt-1">5 minutes</span>
      </button>
      <button type="button" (click)="select('healthy_snack')" class="flex flex-col items-center p-4 rounded-xl border border-yellow-200 bg-yellow-50 hover:bg-yellow-100 transition-all transform hover:scale-[1.03] active:scale-[0.98]">
        <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.121 15.536c-1.171 1.952-3.07 1.952-4.242 0-1.172-1.953-1.172-5.119 0-7.072 1.171-1.952 3.07-1.952 4.242 0M8 10.5h4m-4 3h4m9-1.5a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
        <span class="font-medium text-yellow-700">Healthy Snack</span>
        <span class="text-xs text-yellow-600 mt-1">5 minutes</span>
      </button>
      <button type="button" (click)="select('call_friend')" class="flex flex-col items-center p-4 rounded-xl border border-pink-200 bg-pink-50 hover:bg-pink-100 transition-all transform hover:scale-[1.03] active:scale-[0.98]">
        <div class="w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-pink-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
          </svg>
        </div>
        <span class="font-medium text-pink-700">Call a Friend</span>
        <span class="text-xs text-pink-600 mt-1">5-10 minutes</span>
      </button>
    </div>
    <div class="flex justify-center mt-4">
      <button type="button" (click)="onClose.emit()" class="px-6 py-2 border border-gray-200 bg-white text-gray-700 rounded-full hover:bg-gray-50 transition-all hover:border-gray-300 transform hover:scale-105 active:scale-95">
        Skip for now
      </button>
    </div>
    <div class="mt-6 pt-4 border-t border-gray-100 text-center">
      <p class="text-sm text-gray-500 mb-3">
        We'll track which alternatives work best for you over time.
      </p>
      <div *ngIf="personalizedRecommendation" class="bg-purple-50 rounded-lg p-3 mt-2 border border-purple-100">
        <p class="text-sm font-medium text-purple-700 mb-1">
          Your most effective alternative:
        </p>
        <div class="flex items-center justify-center">
          <span class="font-medium text-purple-800">
            {{ personalizedRecommendation?.name }}
          </span>
          <span class="ml-2 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">
            {{ personalizedRecommendation?.successRate }}% success rate
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
